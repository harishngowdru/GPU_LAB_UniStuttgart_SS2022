# GPU_LAB_UniStuttgart_SS2022

Instructions to run this code in Visual Studio

### Environment Configuration:
1. Download NVIDIA CUDA Toolkit from https://developer.nvidia.com/cuda-downloads
2. Download Boost library from https://sourceforge.net/projects/boost/files/boost-binaries/1.76.0_b1/boost_1_76_0_b1-msvc-14.2-64.exe

### Project Configuration:
1. Download the GPU_LAB_UniStuttgart_SS2022 project from the github.
2. In the CMakeLists.txt change the boost include directory and boost library directory to system include folder.
      - set(BOOST_INC "C:/local/boost_1_76_0_b1_rc2")
      - set(BOOST_LIB "C:/local/boost_1_76_0_b1_rc2/lib64-msvc-14.2")

### Building the project
1.  Open Visual Studio-> Choose "Open a local folder" -> and select "GPU_LAB_UniStuttgart_SS2022" folder.
2.  CMake generation will automatically start.
3.  Build the project (Ctrl + Shift + B)
4.  In the solution explorer 
      - Choose "Switch between solutions and the available views"
      - Choose "CMake Targets View" 
      - Expand "DisparityMap Project"
      - Configure the "DisparityMap (executable)" as a startup item.

### Execution
1. Execution is started by clicking "DisparityMap.exe" play button.
2. Both SAD and SSD method are executed in cpu and gpu and output is genrated.
3. Output is located in the <current project directory>/out/build/<build type>
     - Four pgm images are generated
        - "disparitymap_SAD_cpu.pgm" -> Generated by executing the disparity map algorithm(SAD) in cpu.
        - "disparitymap_SSD_cpu.pgm" -> Generated by executing the disparity map algorithm(SSD) in cpu.
        - "disparitymap_SAD_gpu.pgm" -> Generated by executing the disparity map algorithm(SAD) in gpu.
        - "disparitymap_SSD_cpu.pgm" -> Generated by executing the disparity map algorithm(SSD) in gpu.

### Handling dependencies at run time.
1. "DisparityMap.cl" file present in src directory and "images" directory are copied during camke generation to cmake binary directory "<current project directory>/out/build/<build type>".
2. This will resolve run time file dependencies dynamically.

### Executing different example
1. Differnt sample examples are placed in the images directory.
2. To run differnt example set we need both right and left image set. Change the image name in the DisparityMap.cpp source file(Provide the complete path for images).
      - https://github.com/harishngowdru/GPU_LAB_UniStuttgart_SS2022/blob/44dbf52510d983ddef109d676cbadbebad9e81ca/src/DisparityMap.cpp#L66
      - https://github.com/harishngowdru/GPU_LAB_UniStuttgart_SS2022/blob/44dbf52510d983ddef109d676cbadbebad9e81ca/src/DisparityMap.cpp#L67
3. Rebuid the project and execute.

### Modification of the code
1.  After every modification in the "DisparityMap.cl" it is recomended to generate cache again and build once again. In the current workflow "DisparityMap.cl" is not copied to the binary directory for incremental build.
